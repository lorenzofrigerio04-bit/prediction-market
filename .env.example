# =============================================================================
# Prediction Market – Variabili d'ambiente
# =============================================================================
# Locale: copia in .env.local e compila. Su Vercel: Project → Settings → Environment Variables.
# NON committare .env o .env.local (contengono segreti). Usa .env.example come riferimento.
# =============================================================================

# ---- Database (obbligatorio) ----
# PostgreSQL: Neon, Supabase, Vercel Postgres. Su Neon usa l'URL con "-pooler".
DATABASE_URL="postgresql://user:password@host:5432/dbname?sslmode=require"

# ---- NextAuth (obbligatori) ----
# URL dell'app: in locale http://localhost:3000, su Vercel https://tuo-progetto.vercel.app (senza slash finale)
NEXTAUTH_URL="http://localhost:3000"
# Segreto per firmare i cookie: genera con: openssl rand -base64 32
NEXTAUTH_SECRET="your-secret-key-here-change-in-production"

# ---- Google OAuth (opzionale: "Accedi con Google") ----
# Crea credenziali su https://console.cloud.google.com/apis/credentials
# URI di reindirizzamento: NEXTAUTH_URL + /api/auth/callback/google
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# ---- Email – Verifica account (Resend) ----
# API key: https://resend.com/api-keys
RESEND_API_KEY=""
# Mittente: in test "Prediction Market <onboarding@resend.dev>"; in prod il tuo dominio verificato
EMAIL_FROM="Prediction Market <onboarding@resend.dev>"

# ---- Cron (opzionale) ----
# Segreto per le chiamate cron (es. risoluzione eventi, generazione eventi). Genera con: openssl rand -base64 32
CRON_SECRET=""
# Alternativa per il solo cron generazione eventi (GET /api/cron/generate-events). Se non impostato, si usa CRON_SECRET.
# EVENT_GENERATOR_SECRET=""
# Utente sistema che crea gli eventi generati (pipeline). Dopo il seed, copia l'id stampato e impostalo qui.
# Se non impostato, viene usato il primo admin come fallback.
# EVENT_GENERATOR_USER_ID=""

# ---- Fase 1: Fonti notizie/trend (pipeline eventi) ----
# NewsAPI.ai (Event Registry): https://newsapi.ai – piano free 2000 ricerche, uso in produzione OK
NEWS_API_KEY=""
# Segreto per route di test GET /api/dev/trending-news (opzionale: puoi usare CRON_SECRET)
DEV_TRENDING_SECRET=""
# Opzionali: timeout ms, retry, ore indietro, TTL cache secondi
# EVENT_SOURCES_TIMEOUT_MS=15000
# EVENT_SOURCES_MAX_RETRIES=3
# EVENT_SOURCES_LANGUAGE=it
# EVENT_SOURCES_MAX_AGE_HOURS=168
# EVENT_SOURCES_CACHE_TTL=3600
#   (3600 = 1h, 86400 = 24h se il pipeline chiama 1 volta al giorno)

# ---- Fase 2: Verifica qualità e risolvibilità (lib/event-verification) ----
# Domini: comma-separated. Whitelist vuota = tutti ammessi (salvo blacklist).
# EVENT_VERIFICATION_DOMAIN_WHITELIST=""
# EVENT_VERIFICATION_DOMAIN_BLACKLIST="example.com,test.com"
# File JSON con whitelist/blacklist (path da cwd): { "whitelist": [], "blacklist": [] }
# EVENT_VERIFICATION_DOMAINS_FILE="lib/event-verification/domains.example.json"
# Soglie titolo (caratteri) e score (0–1)
# EVENT_VERIFICATION_MIN_TITLE_LENGTH=15
# EVENT_VERIFICATION_MAX_TITLE_LENGTH=200
# EVENT_VERIFICATION_FILTER_BY_SCORE=1
# EVENT_VERIFICATION_MIN_SCORE=0.25

# ---- Fase 3: Generazione eventi con LLM (lib/event-generation) ----
# Provider: openai | anthropic (default openai)
# GENERATION_PROVIDER=openai
# OpenAI: https://platform.openai.com/api-keys
OPENAI_API_KEY=""
# Anthropic: https://console.anthropic.com/
ANTHROPIC_API_KEY=""
# Opzionali: modello, retry per risposta non JSON valida
# GENERATION_MODEL=gpt-4o-mini
# GENERATION_MAX_RETRIES=2
# Solo in locale se compare UNABLE_TO_GET_ISSUER_CERT_LOCALLY (rete/VPN). In produzione (Vercel) viene ignorata.
# GENERATION_INSECURE_SSL=1
